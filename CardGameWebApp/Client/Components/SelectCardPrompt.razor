@using CardGameWebApp.Shared.DTOs

<BSModal @ref="modal" IsStaticBackdrop="true" DataId="selectCardModal" Size="Size.ExtraLarge">
    <Header>Select a card</Header>
    <Content>
        @foreach (var card in Cards)
        {
            var cardInfo = library.GetCard(card.Name);
            <div class="playcard selected">
                <h3>@cardInfo.Name</h3>
                <img class="illustration" src="/illustrations/@(cardInfo.Illustration).png" />
                <p>@cardInfo.Classification</p>
                <p class="description">@cardInfo.Description</p>
            </div>
        }
    </Content>
    <Footer Context="modal">
        <BSButton MarginStart="Margins.Auto" Color="BSColor.Secondary" @onclick="modal.HideAsync">Pass</BSButton>
        <BSButton Color="BSColor.Primary">Select</BSButton>
    </Footer>
</BSModal>

@code {
    private CardLibrary library = CardLibrary.Instance;
    private BSModal modal;

    [Parameter]
    public bool IsRequired { get; set; } = false;

    [Parameter]
    public IEnumerable<CardRefDTO> Cards { get; set; } = new CardRefDTO[0];

    [Parameter]
    public Action<Guid?> OnSelect { get; set; }

    public async void Show()
    {
        await modal.ShowAsync();
    }
}